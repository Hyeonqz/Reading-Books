# DDD

### 도메인 영역의 주요 구성요소
- 엔티티
- 밸류 -> 고유 식별자를 갖지 않음 , 불변으로 구현할 것을 권장
- 애그리거트 -> 엔티티, 밸류 개체를 개념적으로 묶은 것 ex) Orderer,OrderLine, Order 하나로 묶으면 '주문' 으로 묶을 수 있다. 주문을 할 때 필요한 객체이기 때문.
- 레포지토리
  - 도메인 객체를 영속화 하는데 필요한 기능을 추상화환 것 -> InfraStructure 영역
- 도메인 서비스

에릭 에반스 [도메인 주도 설계] 책 참고하기! <br>

도메인 모델과, 엔티티모델이 같을 필요가 전혀 없다 <br>


도메인 모델 엔티티는 도메인 기능도 함께 제공한다 <br>

#### 1. 애그리거트 -> 관련 객체를 하나로 묶은 군집
도메인이 커질수록 개발할 도메인 도메인 모델도 커지면서 많은 엔티티와 Value 가 출현한다 <br>
엔티티와 밸류 개수가 많아질수록 모델은 점점 더 복잡해진다 <br>

#### 2. 인프라스트럭처
표현,응용, 도메인 영역을 지원한다. <br>
도메인 객체의 영속성 처리, 트랜잭션, SMTP, REST 클라이언트 등 외부 영역에서 필요로 하는 프레임워크, 구현 기술, 보조 기능을 지원한다 <br>
외부라 함은, 인프라 영역이 아닌, 표현,응용,도메인이 외부이다 <br>
이 외부에서 필요로 하는 무언가를 위 부분에서 구현한다 <br>

DIP 처럼, 도메인,응용 영역이 인프라 영역을 직접 의존하는 것보다, 도메인,응용 영역에 정의한 인터페이스를 인프라 영역에서 구현하는 것이 시스템을 더 유연하고 테스트하기 쉽게 만들어준다 <br>

구현의 편리함은 DIP 가 주는 장점(유연함, 테스트) 만큼 중요하기 때문에, DIP 의 장점을 해치지 않는 범위에서 응용 영역과 도메인 영역에서 구현 기술에 대한 의존을 가져가는 것이 나쁘지 않다고 생각한다 <br>

#### 모듈 구성
패키지 구성에는 정답이 없다. 아래는 영역별로 패키지를 구성한다<br>
```java
-- ui
-- application
-- domain
-- infrastructure
```

도메인이 크면, 도메인 별로 패키지를 나누고 하위 도메인마다 계층을 구성한다
```html
catalog
-- ui
-- application
-- domain
-- infrastructure

order
-- ui
-- application
-- domain
-- infrastructure

member
-- ui
-- application
-- domain
-- infrastructure
```

개인적으로는 한 패키지에 가능하면 10~15개 미만으로 타입 개수를 유지하면 좋을 것 같다 <br>
위 수가 넘어가면 패키지를 분리하는 시도를 해보자 <br>


> Tip: 상위 수준에서 모델을 정리하면 도메인 모델의 복잡한 관계를 이해하는데 도움이 된다

복잡한 도메인을 이해하고 관리하려면 '애그리거트' 가 필요하다 <br>